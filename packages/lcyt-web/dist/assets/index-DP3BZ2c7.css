*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html{height:100%;font-size:14px;line-height:1.5}body{height:100%;min-height:100vh;overflow:hidden}button{cursor:pointer;border:none;background:none;font:inherit;color:inherit}input,textarea,select{font:inherit;color:inherit}ul,ol{list-style:none}a{color:inherit;text-decoration:none}dialog{border:none;padding:0;background:transparent}dialog::backdrop{background:#000000b3}:root{--color-bg: #0f1117;--color-surface: #1a1d27;--color-surface-elevated: #22263a;--color-border: #2e3250;--color-accent: #4f8ef7;--color-accent-dim: #2d5ab0;--color-success: #3fb950;--color-warning: #e3b341;--color-error: #f85149;--color-text: #e6edf3;--color-text-dim: #7d8590;--color-text-muted: #484f58;--color-active-line: #1f3a5f;--color-active-line-border: #4f8ef7;--color-sent-flash: #1a3a1f;--header-height: 44px;--footer-height: 52px;--tab-height: 36px;--font-mono: "Cascadia Code", "Fira Code", "Consolas", "Menlo", monospace;--font-ui: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif}@media (prefers-color-scheme: light){:root:not([data-theme=dark]){--color-bg: #ffffff;--color-surface: #f6f8fa;--color-surface-elevated: #ffffff;--color-border: #d0d7de;--color-accent: #0969da;--color-accent-dim: #218bff;--color-success: #1a7f37;--color-warning: #9a6700;--color-error: #cf222e;--color-text: #1f2328;--color-text-dim: #57606a;--color-text-muted: #8c959f;--color-active-line: #dbeafe;--color-active-line-border: #0969da;--color-sent-flash: #dcfce7}}:root[data-theme=light]{--color-bg: #ffffff;--color-surface: #f6f8fa;--color-surface-elevated: #ffffff;--color-border: #d0d7de;--color-accent: #0969da;--color-accent-dim: #218bff;--color-success: #1a7f37;--color-warning: #9a6700;--color-error: #cf222e;--color-text: #1f2328;--color-text-dim: #57606a;--color-text-muted: #8c959f;--color-active-line: #dbeafe;--color-active-line-border: #0969da;--color-sent-flash: #dcfce7}body{background:var(--color-bg);color:var(--color-text);font-family:var(--font-ui)}#app{display:grid;grid-template-rows:var(--header-height) 1fr var(--footer-height);height:100vh;overflow:hidden}#header{background:var(--color-surface);border-bottom:1px solid var(--color-border);display:flex;align-items:center;padding:0 12px;gap:12px;overflow:hidden;flex-shrink:0}#main{display:grid;grid-template-columns:60fr 40fr;overflow:hidden}.panel{display:flex;flex-direction:column;overflow:hidden}.panel--left{border-right:1px solid var(--color-border)}#footer{background:var(--color-surface);border-top:1px solid var(--color-border);display:flex;align-items:center;padding:0 8px;gap:8px}@media (max-width: 768px){#main{grid-template-columns:1fr}.panel--right{display:none;position:fixed;inset:var(--header-height) 0 var(--footer-height) 0;background:var(--color-bg);z-index:50}.panel--right.panel--right-visible{display:flex}}.status-bar{display:flex;align-items:center;gap:10px;width:100%;font-size:13px;overflow:hidden}.status-bar__brand{font-weight:700;font-size:14px;color:var(--color-text);white-space:nowrap;flex-shrink:0}.status-bar__dot{width:10px;height:10px;border-radius:50%;background:var(--color-text-muted);flex-shrink:0;transition:background .3s}.status-bar__dot--connected{background:var(--color-success);box-shadow:0 0 6px var(--color-success)}.status-bar__label{color:var(--color-text-dim);white-space:nowrap}.status-bar__value{color:var(--color-text);font-variant-numeric:tabular-nums;white-space:nowrap}.status-bar__error{color:var(--color-error);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0}.status-bar__spacer{flex:1}.status-bar__btn{padding:4px 8px;border-radius:4px;font-size:12px;color:var(--color-text-dim);background:transparent;border:1px solid var(--color-border);transition:color .15s,border-color .15s;white-space:nowrap;flex-shrink:0}.status-bar__btn:hover{color:var(--color-text);border-color:var(--color-text-dim)}.status-bar__btn--icon{font-size:16px;border:none;padding:4px 6px}.drop-zone{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;gap:12px;cursor:pointer;transition:background .15s}.drop-zone__inner{border:2px dashed var(--color-border);border-radius:8px;padding:48px 32px;display:flex;flex-direction:column;align-items:center;gap:10px;transition:border-color .15s,background .15s;pointer-events:none;width:100%;max-width:400px}.drop-zone--active .drop-zone__inner,.drop-zone:hover .drop-zone__inner{border-color:var(--color-accent);background:#4f8ef70f}.drop-zone__icon{font-size:36px;opacity:.5}.drop-zone__title{font-size:15px;font-weight:600;color:var(--color-text)}.drop-zone__sub{font-size:13px;color:var(--color-text-dim);text-align:center}.drop-zone__error{font-size:12px;color:var(--color-error);margin-top:4px}.file-tabs{display:flex;align-items:center;background:var(--color-surface);border-bottom:1px solid var(--color-border);overflow-x:auto;flex-shrink:0;scrollbar-width:none}.file-tabs::-webkit-scrollbar{display:none}.file-tab{display:flex;align-items:center;gap:6px;padding:0 12px;height:var(--tab-height);font-size:12px;color:var(--color-text-dim);border-right:1px solid var(--color-border);background:transparent;white-space:nowrap;flex-shrink:0;transition:color .15s,background .15s}.file-tab:hover{color:var(--color-text);background:var(--color-surface-elevated)}.file-tab--active{color:var(--color-text);background:var(--color-bg);border-bottom:2px solid var(--color-accent)}.file-tab__name{max-width:140px;overflow:hidden;text-overflow:ellipsis}.file-tab__badge{font-size:10px;padding:1px 4px;border-radius:3px;background:var(--color-surface-elevated);color:var(--color-text-dim);line-height:1.4}.file-tab__badge--end{background:var(--color-warning);color:#000}.file-tab__badge--empty{background:var(--color-text-muted);color:var(--color-surface)}.file-tab__close{opacity:.4;font-size:14px;line-height:1;transition:opacity .15s;padding:0 2px}.file-tab__close:hover{opacity:1}.file-tab--add{color:var(--color-text-dim);padding:0 10px;font-size:18px;border-right:none}.file-tab--add:hover{color:var(--color-accent);background:transparent}.caption-view{flex:1;overflow-y:auto;padding:4px 0;font-family:var(--font-mono);font-size:13px;line-height:1.7}.caption-lines{padding:0}.caption-line{display:flex;align-items:flex-start;padding:2px 12px 2px 8px;cursor:pointer;gap:6px;transition:background .1s;border-left:3px solid transparent}.caption-line:hover{background:var(--color-surface)}.caption-line__gutter{width:16px;text-align:center;color:var(--color-accent);flex-shrink:0;font-size:12px;line-height:1.7}.caption-line__text{flex:1;word-break:break-word}.caption-line--active{background:var(--color-active-line);border-left-color:var(--color-active-line-border);font-weight:600}.caption-line--active:hover{background:var(--color-active-line)}.caption-line--sent{animation:sent-flash 1.5s ease-out forwards}@keyframes sent-flash{0%{background:var(--color-sent-flash)}to{background:transparent}}.caption-view__empty{padding:32px;color:var(--color-text-dim);text-align:center;font-family:var(--font-ui);font-size:13px}.caption-view__eof{padding:8px 12px;font-family:var(--font-ui);font-size:12px;color:var(--color-warning);text-align:center;border-top:1px solid var(--color-border)}.sent-panel{display:flex;flex-direction:column;overflow:hidden;height:100%}.sent-panel__header{padding:8px 12px;font-size:12px;font-weight:600;color:var(--color-text-dim);text-transform:uppercase;letter-spacing:.06em;border-bottom:1px solid var(--color-border);flex-shrink:0}.sent-list{flex:1;overflow-y:auto;padding:4px 0;font-family:var(--font-mono);font-size:12px}.sent-item{display:flex;align-items:baseline;gap:8px;padding:3px 12px;border-bottom:1px solid transparent}.sent-item:first-child{color:var(--color-text)}.sent-item__seq{color:var(--color-text-muted);min-width:36px;flex-shrink:0}.sent-item__time{color:var(--color-text-dim);min-width:60px;flex-shrink:0}.sent-item__text{color:var(--color-text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.sent-panel__empty{padding:32px;color:var(--color-text-dim);text-align:center;font-family:var(--font-ui);font-size:13px}.input-bar{display:flex;align-items:center;gap:8px;width:100%}.input-bar__input{flex:1;background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:6px;padding:8px 12px;font-family:var(--font-mono);font-size:13px;color:var(--color-text);outline:none;transition:border-color .15s}.input-bar__input::placeholder{color:var(--color-text-muted);font-size:12px}.input-bar__input:focus{border-color:var(--color-accent)}.input-bar__input--error{border-color:var(--color-error);animation:input-shake .3s ease-out}@keyframes input-shake{0%,to{transform:translate(0)}25%{transform:translate(-4px)}75%{transform:translate(4px)}}.input-bar__input:disabled{opacity:.4;cursor:not-allowed}.input-bar__send{background:var(--color-accent);color:#fff;border-radius:6px;padding:8px 14px;font-size:14px;font-weight:600;transition:background .15s,transform .1s;flex-shrink:0}.input-bar__send:hover:not(:disabled){background:var(--color-accent-dim)}.input-bar__send:active:not(:disabled){transform:scale(.95)}.input-bar__send:disabled{opacity:.35;cursor:not-allowed}.input-bar__send--flash{animation:send-flash .3s ease-out}@keyframes send-flash{0%{transform:scale(1);background:var(--color-success)}50%{transform:scale(.92)}to{transform:scale(1);background:var(--color-accent)}}.settings-modal{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;z-index:100;padding:16px}.settings-modal__backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#000000b3}.settings-modal__box{position:relative;background:var(--color-surface);border:1px solid var(--color-border);border-radius:10px;width:100%;max-width:520px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 24px 64px #00000080}.settings-modal__header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 0}.settings-modal__title{font-size:16px;font-weight:700}.settings-modal__close{font-size:20px;color:var(--color-text-dim);padding:4px;line-height:1;border-radius:4px}.settings-modal__close:hover{color:var(--color-text);background:var(--color-surface-elevated)}.settings-modal__tabs{display:flex;border-bottom:1px solid var(--color-border);padding:0 20px;margin-top:12px;gap:0}.settings-tab{padding:8px 12px;font-size:13px;color:var(--color-text-dim);border-bottom:2px solid transparent;margin-bottom:-1px;transition:color .15s}.settings-tab:hover{color:var(--color-text)}.settings-tab--active{color:var(--color-text);border-bottom-color:var(--color-accent)}.settings-modal__body{overflow-y:auto;padding:20px;flex:1;display:flex;flex-direction:column;gap:0}.settings-panel{display:none;flex-direction:column;gap:14px}.settings-panel--active{display:flex}.settings-field{display:flex;flex-direction:column;gap:4px}.settings-field__label{font-size:12px;font-weight:600;color:var(--color-text-dim)}.settings-field__input-wrap{position:relative;display:flex}.settings-field__input{flex:1;background:var(--color-bg);border:1px solid var(--color-border);border-radius:6px;padding:8px 10px;font-size:13px;color:var(--color-text);outline:none;transition:border-color .15s}.settings-field__input:focus{border-color:var(--color-accent)}.settings-field__eye{position:absolute;right:8px;top:50%;transform:translateY(-50%);color:var(--color-text-dim);font-size:14px;padding:2px 4px}.settings-field__eye:hover{color:var(--color-text)}.settings-field__input--has-eye{padding-right:32px}.settings-error{font-size:12px;color:var(--color-error);background:#f851491a;border:1px solid var(--color-error);border-radius:6px;padding:8px 10px}.settings-status-row{display:flex;align-items:center;gap:8px;font-size:13px}.settings-status-row__label{color:var(--color-text-dim);min-width:110px}.settings-status-row__value{color:var(--color-text);font-family:var(--font-mono);font-size:12px}.settings-modal__footer{display:flex;flex-direction:column;gap:8px;padding:16px 20px;border-top:1px solid var(--color-border)}.settings-modal__actions{display:flex;gap:8px;flex-wrap:wrap}.btn{padding:8px 14px;border-radius:6px;font-size:13px;font-weight:500;transition:background .15s,opacity .15s}.btn--primary{background:var(--color-accent);color:#fff}.btn--primary:hover:not(:disabled){background:var(--color-accent-dim)}.btn--secondary{background:var(--color-surface-elevated);color:var(--color-text);border:1px solid var(--color-border)}.btn--secondary:hover:not(:disabled){border-color:var(--color-text-dim)}.btn--danger{background:transparent;color:var(--color-error);border:1px solid var(--color-error)}.btn--danger:hover:not(:disabled){background:#f851491a}.btn:disabled{opacity:.4;cursor:not-allowed}.btn--sm{padding:5px 10px;font-size:12px}.settings-checkbox{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px;color:var(--color-text)}.settings-checkbox input[type=checkbox]{width:14px;height:14px;accent-color:var(--color-accent)}#toast-container{position:fixed;bottom:calc(var(--footer-height) + 12px);right:12px;z-index:200;display:flex;flex-direction:column;gap:8px;pointer-events:none}.toast{padding:10px 16px;border-radius:8px;font-size:13px;font-weight:500;max-width:360px;box-shadow:0 4px 16px #0006;pointer-events:auto;animation:toast-in .2s ease-out}@keyframes toast-in{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.toast--info{background:var(--color-surface-elevated);border:1px solid var(--color-border);color:var(--color-text)}.toast--success{background:#3fb95026;border:1px solid var(--color-success);color:var(--color-success)}.toast--error{background:#f8514926;border:1px solid var(--color-error);color:var(--color-error)}.toast--warning{background:#e3b34126;border:1px solid var(--color-warning);color:var(--color-warning)}
